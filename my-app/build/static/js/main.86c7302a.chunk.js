(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{116:function(e,t,a){e.exports=a(126)},123:function(e,t,a){},126:function(e,t,a){"use strict";a.r(t);var l=a(0),n=a.n(l),o=a(93),r=a.n(o),c=(a(123),a(92),a(131)),s=a(135),i=a(137),d=a(136);a(111),a(112),a(139),a(140),a(141),a(142),a(143),a(138);const p=Object(l.createContext)();var m=a(133);const{TextArea:u}=m.a;var g=function(){const[e,t]=Object(l.useState)(""),{filedata:a,setFiledata:o}=Object(l.useContext)(p);return n.a.createElement(u,{rows:8,placeholder:"hello TextField",className:"text-field",value:a.text,onInput:e=>{console.log("[TEXTFIELD onInput]",e.target.value,a),t(e.target.value),o({key:a.key,text:e.target.value})}})},f=a(134),h=a(107);var y=function(){return n.a.createElement(f.a,{id:"btnContainer"},n.a.createElement(h.a,{type:"primary",className:"button",disabled:!0},"\u041d\u043e\u0432\u044b\u0439 \u0444\u0430\u0439\u043b"),n.a.createElement(h.a,{type:"primary",className:"button",disabled:!0},"\u041d\u043e\u0432\u0430\u044f \u043f\u0430\u043f\u043a\u0430"))},E=a(132);var b=function(e){let{appData:t}=e;const[a,o]=Object(l.useState)(t),[r]=Object(l.useState)([]),{filedata:c,setFiledata:s}=Object(l.useContext)(p);if(console.log("[Tree filedata]",a,c),null!=c.key){const e=function e(t,a){return a.map((a,l)=>(a.children&&(a.children=e(t,a.children)),a.key===t?(a.text=c.text,console.log("[fd]",c.key,t,c.text),a):a))}(c.key,a);console.log("[newtree]",e)}return n.a.createElement(E.a,{className:"draggable-tree",defaultExpandedKeys:r,draggable:!0,blockNode:!0,onDragEnter:e=>{console.log(e)},onDrop:e=>{console.log("[info onDrop]",e);const t=e.node.key,l=e.dragNode.key,n=e.node.pos.split("-"),r=e.dropPosition-Number(n[n.length-1]),c=(e,t,a)=>{for(let l=0;l<e.length;l++){if(e[l].key===t)return a(e[l],l,e);e[l].children&&c(e[l].children,t,a)}},s=[...a];let i;if(c(s,l,(e,t,a)=>{a.splice(t,1),i=e}),e.dropToGap)if((e.node.props.children||[]).length>0&&e.node.props.expanded&&1===r)c(s,t,e=>{e.children=e.children||[],e.children.unshift(i)});else{let e,a=[];c(s,t,(t,l,n)=>{a=n,e=l}),-1===r?a.splice(e,0,i):a.splice(e+1,0,i)}else c(s,t,e=>{e.children=e.children||[],e.children.unshift(i)});console.log("[before setGData]",s),o(s)},onSelect:(e,t)=>{console.log("[NODE onSelect]",e,t,c),s({key:t.node.key,text:t.node.text})},treeData:a})};const{Title:N}=c.a;var k=function(e){let{appData:t,oldTree:a}=e;const[o,r]=Object(l.useState)({key:null,text:""}),c=(e,t,a)=>{const l=a||"0",n=t||"0";for(let o=0;o<e.length;o++){const t="".concat(l,"-").concat(o);e[o].key=t,e[o].children.length>0&&c(e[o].children,n+1,t)}return e},m="no"===a?c(t):JSON.parse(t);"no"===a&&(localStorage.setItem("mytreedata",JSON.stringify(m)),localStorage.setItem("oldTree","yes"));const[u,f]=Object(l.useState)(m);return n.a.createElement("div",{className:"App"},n.a.createElement(s.a,{gutter:16},n.a.createElement(i.a,{span:14,offset:4},n.a.createElement(N,{className:"heading"},"The Tree App"))),n.a.createElement(s.a,{gutter:16,className:"m-top-5"},n.a.createElement(p.Provider,{value:{filedata:o,setFiledata:r}},n.a.createElement(i.a,{span:6,offset:4,className:"block-bg"},n.a.createElement(d.a,{vertical:"true",justify:"space-between"},n.a.createElement("div",{className:"h-tree"},n.a.createElement(b,{appData:u,filedata:o,className:"text-field"})),n.a.createElement("br",null),n.a.createElement(y,null))),n.a.createElement(i.a,{span:8,offset:0,className:"block-bg"},n.a.createElement(g,null)))))};if("yes"===localStorage.getItem("oldTree")&&localStorage.getItem("mytreedata")){r.a.createRoot(document.getElementById("root")).render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(k,{appData:localStorage.getItem("mytreedata"),oldTree:"yes",appHello:"Hello Old FileTree"})))}else fetch("".concat("","/initial.json")).then(e=>e.json()).then(e=>{console.log("-- New Tree --");r.a.createRoot(document.getElementById("root")).render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(k,{appData:e,oldTree:"no",appHello:"Hello New FileTree"})))}).catch(e=>{console.log("[err reading file]",e)})},92:function(e,t,a){}},[[116,1,2]]]);
//# sourceMappingURL=main.86c7302a.chunk.js.map